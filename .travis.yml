language: ruby
cache: bundler
bundler_args: "--without production"
rvm:
- 2.2.4
sudo: true
before_install:
- sudo apt-get update
- sudo apt-get install -y r-base r-base-dev graphviz
- wget https://s3.amazonaws.com/travis-phantomjs/phantomjs-2.0.0-ubuntu-12.04.tar.bz2
- tar -xjf phantomjs-2.0.0-ubuntu-12.04.tar.bz2
- sudo rm -rf /usr/local/phantomjs/bin/phantomjs
- sudo mv phantomjs /usr/local/phantomjs/bin/phantomjs
deploy:
  provider: heroku
  app: small-data-analyst
  api_key:
    secure: FOY+zwMtK8t5jmHisGUN7c+tUaRuiEXPFg/CF1+MjqpCtR3BwKQ4M+FV8+We1nsOZCH0nlDIHpp8BIu4jNlyMiiKDxzrXHdF5nSSCbrRLsr4+c2a3NYgq6Hl2NDkwvsEF/XO8yWyFnwxjxfi9SF1RWOeS5xwwO5RVxHP4JeBMUrBHxLw2ylPl16aeM0yq+zk+7ZfvY1yrVQk7xyqGJ/tNGVyBOq4U/LlMSrkENVV0IjNV3E1edbX9U8XgvosGcGrTeq7B9oosJT/nUUkYa2uU4/wqAZBqtbQol6v2LMUY77oaR13Qwvazz8j910R/C+G1RC+dcagJpPVGvChg0eI3ESZvrV7Ujwty8NIwQASUXBbmpYIcjjW16hEurYJwfWclSs9y5mfb3woS8Rj3uTGuXv/3aZGjJl0tD/g16MTICTv+oAj5zoWCdQkBt8XMaNq32Ex+HkZB40rlAwO63qhg0hb7YrqMU/wo29W3XhxWlND4b7W7TMAR2Zgz9duXfFh6cY7t4VWG1Y3ZeGQOYDVleTp5MmR+oxRyeLMZSGtsPmJiVX+E5LKslVoLjW/AnXunR9733DuC57gsVJ4fwJM6yjbtb7UOYjt81zWU2Tzq349ouBLRUbadSL5ct3ZhW6GHK6+7Q5dxbFked/VeZTJ+AC114G4LA2YmMxG1eVOFuM=
  run: rake db:migrate:with_data
addons:
  code_climate:
    repo_token: 20ba08a6f77b651ba970dc30e9048e2b7528daec6ad0cdbd9172a6a31aab9e1e
env:
  global:
  - secure: X0txePNgQpBB8m6x/RU1d/SB7Kn6mYGXOU4YrboZKbCQppGxlgBuiVTE+1oIxG0tVmXMAtp9lMuGVGniHVR4t5VVPIgUWHcI6lVM7AblUX0YS9dOWQ3A0fPMRVurWfqym0ZvDxNNxUCVLgAVD5MizIJ8rmkJKjQ6WIO/1xCjdJcTpdYojD25hRPwTkd3DoDBFmS5l/9kjxSmYwTRjOgDaEdz2agVwoyGDZBKCpMpkiWX2bE92pFnC6m0ne4W3BHclrXRFrgpb9ydVyxMW6YtN1l8c//f9CHCeX3KVsuyFjQU4/Ia0e4knfwmzESiznnZmEQFpzb2EQIB85Ba83Cp5KBFU4JBhrZK+Ef3xCiWSJgRV5KqrWHJes5169trQFLIcC6iXH6X6GlrDwvQ5aKNB4hen8gkngxsaSuFnJ0cBXji/4RnSClUUN/7aV23O/29seOz8aLVc/07HY0CB94xleFooBPjj21KPxUuyvVOY+11uhhlYz8wVZtdrGiOp4GzPhJG1sMK/uBfBxGzzUfQnaSklYcvBU5BTMk/w3/xv9JSW5mOE2ygFIiQkhTHetOm1RgW8cVqldct6j9ocayfBHNKWq+qNpi68HTAVqV96831H3Wr6XnoENJ0N7xRt42bUma43V8JvpK12B7yhtn8c/gfkNSWJAGd6DEt6f4a0sg=
  - secure: H4UFPihxQYS9hPH237QT31KnnziPAXZjDdNKxZsV3Yl4S3a0hHjUiRnvDiOBSro+TApEljpN0ISB+hiaTjQ5hI/HTa+ku2fmU1srt+/hVhPWID+1W+3m+ZX5/hJm8GHRAjtw5OQ7n1fd6Dn+BXr1GCQIBdOEqm6obmoZHt9oY902u0tTsK4pM3JT6OOiTtcundtJFdEeFbKCeQlvCYIiPqoeu/SkkFj9+rL3mehp2pemOHdAnesipDrD+rA9/o+EMMehw5tw7J8oxqdnUhGsHRmI0MzZweN1AYVSUn/wlBHuwa1UofAsDF3QgVxTcrrf8/8BPgSVFlPCddPlvYysrmvfvzJdAmN2GWA6bF3Npc9bJUVp6+UKzZ3wT+VGH1hF/8CXBGh1X7673/2Gx6yvqsm8plclEYdgCKcBhkPw4kVnWo9Ect5a4LlLkCMrAS2UnGtgF5xulj9bp/cCEGeex+/e9F30ZtB4qN6SLq8tTJKhJHKyCsowjWInzVmYWSNxxYWfSMH7ZGqu3wjOzqszetqpZgWggm3AjqFty9CXwcIKFKdEztmi5475IKrXxIggmf0lIQoc2sSzQQuA3Wa0RuJwPr29o8p9F2JlMdNwiUAqXaBkdMUFqw16ZFgZMsgIRQjc3p2IeD6pRMpKP+EN3yFLlqQhUl8ENrUFbIPXS0I=
  - secure: WNR4kMYDbDV2SVVGTL0CygGqvx820Jp7eTcPb3q8S++eYlOzFGkG/Thjhk5DQFqZFC8ncAMw/LVw5fVO8FT58DY+DBw1wQl40SG0rn53zl2RQ2wSYYpv1++1xHv4A4dO6JajxBdM9AttOmYxTG0ev3qcrNTLRmH/sxaT+QJRJYI5un73kQFK+lpcwvLJfEHN/1ALLSnmbHiC2aoKMYxKoo2009fqprOunzcBh/3LMUyHN7VpXvHrTKyEZJvBOoE2boZFmZQbulPaip6jo1kD49lk6JTa2L3lv5ZvzMBaG+rQAYzcqx/NYGXDTd8j9WzaIITbTPFivFCD968AC1bAs7rlnrjXS03+3WH1Wqoi1ph0rwL1M1RuU0HPrKhfPhJuO7/L1Tz5V+LYPnhYxXm+a8c5SPsG7i13aJItKdDwKru//qD8BwrkFoClLYmmYHVqq4v98k3X7cqqfxnBnZARqbAuZEWLHOTDa/BT9H68Dw589NS5RyvFUV1CrnQT0Ma8miXDvJDWd0coXtiBFL/6+L9al4T0C92LOKwVw7QO7UYwFNsvcOhJUUq7r4YBUu//oudgDVF5HFRDCtk/CAB3rz9TPJ/AyTS4yoibhTIeeRJ9oAdKBx5bba+Zantb6yEhLmC/i1EJD5AnrKVUgd/qfbXKzU+gLRUTnMdJsY7KuuM=
  - secure: ajbioax2azyGbbgeHzGnCvkDurMUki4Fu/mdemEiIAij7/xOH04BRxqE6YdGV2/Xr2k+Zd+B5PxJuDiKJtIfXH7IDXlAoluvoGQaoebAZ+nQSGwR4Iv5YbYHPeSGcel1CLNpSSp+avYZk6KiDl533MY3M5vBWLogbp1Y7PaoUVDLjG8MhIOVRPGNWXDDCgSE195sq2/W6fOMGCUaDeKqnowqSk+qRTrIZP7BLMkvgkjlKyLYpZuAlVhFvkOYpPNidyzuKZrD6cG8rYdrcSmr5z4PEuzsGQvLTg61XgicipGOQ6AS4wo/H5vT18qrU4WyboJtVBkZel+UDS4NhCRJz6lmVplx8eslBi60XNRayfF+OV4WjURTtZ1f/Dg2++eZ31+OPEodggqPbiw1lY0/eskmtlzq6HowBpKIgSQQgA75OiNpWO7Bkq5GFu4ZtjPaEYSOSrbOFFW+6TRM5nx3vYpn1S1ol3EhyxccSzTpx1hN5edSafTjDXDrO4cvlgrxyQDVOJmr/qT6MdSkRh1RUr/h6CBHcMLaT044ydq3bPly4NoJ6yuU+ZrqzSEwC7nn9v33NbhNnCZlaaD1xNEws22XoxCW4bahoOCCmIm+5moLLailQkcqYxf2OlYMbQMQcbJFOHjLp9ideCVenDiqFCZCKMcCuFqnUmiYTVQCJzE=
before_script:
- bundle exec rake db:drop db:create db:migrate
after_success: 
